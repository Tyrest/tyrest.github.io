<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vertical Vitality | Climber's Daily Maintenance</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F4;
            /* Warm Stone */
            color: #1C1917;
            /* Stone 900 */
        }

        /* Chart Container Styling - MANDATORY */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Utility for hiding scrollbar but keeping functionality */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .active-nav {
            border-bottom: 2px solid #D97706;
            /* Amber 600 */
            color: #D97706;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .progress-ring__circle {
            transition: stroke-dashoffset 0.35s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
    </style>
</head>

<body class="min-h-screen flex flex-col">

    <!-- Application Structure Plan: 
         The app is designed as a "Session Companion". 
         1. Header: Simple identity.
         2. Dashboard (Home): High-level stats, quick start, and the "Physiology Balance" chart (Why we do this).
         3. Active Session (The Core): A focused, timer-based interface to guide the user through the 15-minute plan without distractions.
         4. Library (Reference): Detailed breakdown of each stretch for users who want to learn the form before starting.
         
         Flow: User lands on Dashboard -> Sees rationale (Chart) -> Clicks "Start Routine" -> Enters Active Session -> Completes -> Returns to Dashboard with updated stats.
    -->

    <!-- Chosen Palette: "Send Stone". Warm neutrals (Stone/Warm Gray backgrounds) with Earthy Amber and Muted Teal accents. Reflects nature and rock. -->

    <!-- Navigation -->
    <nav class="bg-white border-b border-stone-200 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-stone-800 tracking-tight">üßó Vertical<span
                            class="text-amber-600">Vitality</span></span>
                </div>
                <div class="flex space-x-8 items-center">
                    <button id="nav-dashboard"
                        class="nav-btn active-nav px-3 py-2 text-sm font-medium transition-colors"
                        onclick="switchView('dashboard')">Dashboard</button>
                    <button id="nav-library"
                        class="nav-btn text-stone-500 hover:text-stone-900 px-3 py-2 text-sm font-medium transition-colors"
                        onclick="switchView('library')">Move Library</button>
                    <button
                        class="bg-stone-900 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-stone-700 transition-colors shadow-lg"
                        onclick="startRoutine()">Start Session</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-grow container mx-auto px-4 py-8 max-w-6xl relative">

        <!-- VIEW: DASHBOARD -->
        <div id="view-dashboard" class="space-y-8 fade-in">

            <!-- Hero / Intro -->
            <div class="text-center space-y-4 mb-12">
                <h1 class="text-4xl md:text-5xl font-extrabold text-stone-800">The 15-Minute Daily Maintenance</h1>
                <p class="text-lg text-stone-600 max-w-2xl mx-auto">
                    A science-backed protocol specifically designed for climbers to counteract repetitive strain, open
                    tight hips, and maintain tendon health.
                </p>
                <div class="flex justify-center gap-4 mt-6">
                    <div
                        class="flex items-center gap-2 text-sm text-stone-500 bg-white px-3 py-1 rounded-full shadow-sm border border-stone-200">
                        <span>‚è±Ô∏è 15 Minutes</span>
                    </div>
                    <div
                        class="flex items-center gap-2 text-sm text-stone-500 bg-white px-3 py-1 rounded-full shadow-sm border border-stone-200">
                        <span>üß† Recovery Focus</span>
                    </div>
                    <div
                        class="flex items-center gap-2 text-sm text-stone-500 bg-white px-3 py-1 rounded-full shadow-sm border border-stone-200">
                        <span>üõ°Ô∏è Injury Prevention</span>
                    </div>
                </div>
            </div>

            <!-- Dashboard Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">

                <!-- Visualization: Physiology Balance -->
                <!-- Visualization & Content Choices: 
                     Goal: Show the user WHY this plan works. 
                     Method: Chart.js Radar Chart. 
                     Interaction: None (static overview).
                     Justification: Climbers often over-index on strength. This visual proves the plan focuses on the neglected areas: Mobility and Antagonists.
                -->
                <div class="glass-panel p-6 rounded-2xl">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-stone-800">Protocol Balance</h2>
                        <p class="text-sm text-stone-500">This routine targets the specific areas climbers neglect.</p>
                    </div>
                    <div class="chart-container">
                        <canvas id="balanceChart"></canvas>
                    </div>
                </div>

                <!-- Interactive: Focus Areas & Stats -->
                <div class="space-y-6">
                    <!-- Section Intro -->
                    <div class="bg-white p-6 rounded-2xl shadow-sm border border-stone-100">
                        <h2 class="text-xl font-bold text-stone-800 mb-2">Key Focus Areas</h2>
                        <p class="text-stone-600 mb-4 text-sm">
                            Click on a focus area to see its importance for climbing longevity.
                        </p>
                        <div class="grid grid-cols-2 gap-3" id="focus-area-grid">
                            <!-- Populated by JS -->
                        </div>
                        <div id="focus-detail"
                            class="mt-4 p-3 bg-stone-50 rounded-lg text-sm text-stone-600 italic hidden">
                            <!-- Dynamic Text -->
                        </div>
                    </div>

                    <!-- Simple Stats (Local Storage Mock) -->
                    <div class="bg-stone-900 text-white p-6 rounded-2xl shadow-lg flex justify-between items-center">
                        <div>
                            <h3 class="text-2xl font-bold" id="streak-display">0</h3>
                            <p class="text-stone-400 text-sm">Sessions Completed</p>
                        </div>
                        <div>
                            <button onclick="startRoutine()"
                                class="bg-amber-600 hover:bg-amber-700 text-white px-6 py-3 rounded-xl font-bold transition-all transform hover:scale-105">
                                Start Now ‚ñ∂
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW: ACTIVE ROUTINE (The Player) -->
        <div id="view-player" class="hidden h-full flex flex-col items-center justify-center max-w-3xl mx-auto">

            <!-- Progress Header -->
            <div class="w-full flex justify-between items-center mb-6">
                <button onclick="exitRoutine()" class="text-stone-400 hover:text-stone-600 text-sm">‚úï Exit</button>
                <div class="text-stone-500 font-medium tracking-widest text-sm">
                    STEP <span id="current-step-num">1</span>/<span id="total-steps-num">8</span>
                </div>
                <div class="w-24"></div> <!-- Spacer -->
            </div>

            <!-- Main Player Card -->
            <div class="bg-white w-full rounded-3xl shadow-2xl overflow-hidden border border-stone-100 relative">
                <!-- Top Half: Visual & Timer -->
                <div class="bg-stone-50 p-8 flex flex-col items-center justify-center min-h-[300px] relative">

                    <!-- Timer Circle -->
                    <div class="relative w-48 h-48 flex items-center justify-center mb-6">
                        <svg class="progress-ring w-48 h-48" width="192" height="192">
                            <circle class="text-stone-200" stroke="currentColor" stroke-width="8" fill="transparent"
                                r="80" cx="96" cy="96" />
                            <circle id="timer-circle" class="text-amber-500 progress-ring__circle" stroke="currentColor"
                                stroke-width="8" fill="transparent" r="80" cx="96" cy="96" />
                        </svg>
                        <div class="absolute inset-0 flex items-center justify-center flex-col">
                            <span id="timer-display" class="text-5xl font-bold text-stone-800 tabular-nums">00:00</span>
                            <span id="timer-label"
                                class="text-stone-400 text-xs font-semibold uppercase tracking-wider mt-1">Duration</span>
                        </div>
                    </div>

                    <!-- Movement Name -->
                    <h2 id="current-move-name" class="text-3xl font-bold text-stone-800 text-center mb-2">Preparation
                    </h2>
                    <div id="current-move-tags" class="flex gap-2 justify-center">
                        <!-- Tags inserted via JS -->
                    </div>
                </div>

                <!-- Bottom Half: Instruction -->
                <div class="p-8">
                    <div class="flex gap-6">
                        <div class="flex-1">
                            <h3 class="text-sm font-bold text-stone-400 uppercase tracking-wider mb-2">Instructions</h3>
                            <p id="current-move-instruction" class="text-lg text-stone-700 leading-relaxed">
                                Prepare your space. We will focus on forearms, shoulders, and hips.
                            </p>
                        </div>
                        <div class="hidden md:block w-1/3 border-l border-stone-100 pl-6">
                            <h3 class="text-sm font-bold text-stone-400 uppercase tracking-wider mb-2">Why?</h3>
                            <p id="current-move-benefit" class="text-sm text-stone-500 italic">
                                Getting ready helps mental focus.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Controls -->
                <div class="bg-stone-900 p-4 flex justify-between items-center">
                    <button onclick="prevStep()"
                        class="text-stone-400 hover:text-white px-4 py-2 rounded transition-colors">
                        ‚Üê Previous
                    </button>
                    <button id="play-pause-btn" onclick="toggleTimer()"
                        class="bg-white text-stone-900 w-12 h-12 rounded-full flex items-center justify-center font-bold hover:bg-stone-200 transition-colors">
                        ‚è∏
                    </button>
                    <button onclick="nextStep()"
                        class="text-stone-400 hover:text-white px-4 py-2 rounded transition-colors">
                        Next ‚Üí
                    </button>
                </div>
            </div>
        </div>

        <!-- VIEW: LIBRARY (Reference) -->
        <div id="view-library" class="hidden space-y-6">
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-stone-800">Technique Library</h2>
                <p class="text-stone-600">Review the form and benefits of each movement in the protocol.</p>

                <!-- Filters -->
                <div class="flex gap-2 mt-4 overflow-x-auto no-scrollbar py-2">
                    <button onclick="filterLibrary('all')"
                        class="filter-btn bg-stone-800 text-white px-4 py-1.5 rounded-full text-sm font-medium transition-colors">All</button>
                    <button onclick="filterLibrary('Forearms')"
                        class="filter-btn bg-white text-stone-600 border border-stone-200 hover:bg-stone-50 px-4 py-1.5 rounded-full text-sm font-medium transition-colors">Forearms</button>
                    <button onclick="filterLibrary('Shoulders')"
                        class="filter-btn bg-white text-stone-600 border border-stone-200 hover:bg-stone-50 px-4 py-1.5 rounded-full text-sm font-medium transition-colors">Shoulders</button>
                    <button onclick="filterLibrary('Hips/Legs')"
                        class="filter-btn bg-white text-stone-600 border border-stone-200 hover:bg-stone-50 px-4 py-1.5 rounded-full text-sm font-medium transition-colors">Hips/Legs</button>
                </div>
            </div>

            <div id="library-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Populated by JS -->
            </div>
        </div>

    </main>

    <!-- FOOTER -->
    <footer class="bg-white border-t border-stone-200 py-6 mt-auto">
        <div class="container mx-auto px-4 text-center text-stone-400 text-sm">
            <p>¬© 2024 Vertical Vitality. Consult a physio if you have acute pain.</p>
        </div>
    </footer>

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <script>
        // --- DATA & STATE ---
        const routine = [
            {
                id: 1,
                name: "Wrist Flexor Stretch",
                duration: 60, // seconds
                area: "Forearms",
                type: "Static",
                tags: ["Antagonist", "Pump Relief"],
                instruction: "Extend arm forward, palm up. Gently pull fingers back towards you. Keep elbow straight but not locked. Switch hands halfway.",
                benefit: "Relieves tightness from gripping. Essential for preventing Golfer's Elbow."
            },
            {
                id: 2,
                name: "Reverse Wrist Extensor",
                duration: 60,
                area: "Forearms",
                type: "Static",
                tags: ["Extensors", "Elbow Health"],
                instruction: "Extend arm forward, palm down. Gently press the back of your hand towards your body. Switch hands halfway.",
                benefit: "Targets the extensors, often weak and tight in climbers, leading to Tennis Elbow."
            },
            {
                id: 3,
                name: "Finger Glides",
                duration: 60,
                area: "Hands",
                type: "Mobility",
                tags: ["Tendons", "Pulleys"],
                instruction: "Start with open hand. 1: Curl fingertips to calluses (Hook). 2: Curl to flat fist. 3: Full fist. 4: Open. Repeat smoothly.",
                benefit: "Lubricates the tendon sheaths (pulleys) to prevent rupture and stiffness."
            },
            {
                id: 4,
                name: "Doorway Pec Stretch",
                duration: 60,
                area: "Shoulders",
                type: "Static",
                tags: ["Posture", "Chest"],
                instruction: "Place forearms on a doorframe at 90 degrees. Step through gently until you feel a stretch across the chest. Do not arch back.",
                benefit: "Opens the chest to counteract the 'climber's hunch' (rolled shoulders)."
            },
            {
                id: 5,
                name: "Puppy Pose",
                duration: 60,
                area: "Shoulders",
                type: "Mobility",
                tags: ["Lats", "Thoracic"],
                instruction: "Start on all fours. Walk hands forward while keeping hips stacked over knees. Melt chest towards floor.",
                benefit: "Increases overhead mobility and stretches tight lats from pull-ups."
            },
            {
                id: 6,
                name: "World's Greatest Stretch",
                duration: 90,
                area: "Hips/Legs",
                type: "Dynamic",
                tags: ["Hips", "T-Spine"],
                instruction: "High plank. Step Right foot outside Right hand. Twist Right arm to sky. Return. Switch sides. Flow continuously.",
                benefit: "Mobilizes hips for high-steps and opens the thoracic spine for reach."
            },
            {
                id: 7,
                name: "Deep Squat (Malasana)",
                duration: 60,
                area: "Hips/Legs",
                type: "Static",
                tags: ["Hip Opener", "Ankles"],
                instruction: "Feet shoulder-width. Squat deep. Keep heels down (if possible). Use elbows to push knees out. Chest up.",
                benefit: "Essential for 'frogging' on the wall and resting in active positions."
            },
            {
                id: 8,
                name: "Butterfly Stretch",
                duration: 60,
                area: "Hips/Legs",
                type: "Static",
                tags: ["Groin", "Flexibility"],
                instruction: "Seated. Soles of feet together. Hold feet, keep spine tall. Gently hinge forward from hips. Do not round back aggressively.",
                benefit: "Improves hip external rotation, crucial for keeping hips close to the wall."
            }
        ];

        const focusDetails = {
            "Forearms": "Climbers rely 90% on flexors. Stretching extensors prevents imbalances.",
            "Shoulders": "Overhead pulling tightens lats. We need to open the chest to breathe and reach.",
            "Hips": "High-stepping requires immense hip mobility. Tight hips force the upper body to work harder.",
            "Tendons": "Gliding exercises ensure synovial fluid reaches avascular tendon zones."
        };

        let currentStepIndex = 0;
        let timerInterval = null;
        let timeRemaining = 0;
        let isPaused = true;
        let sessionsCompleted = parseInt(localStorage.getItem('climbStretchStreak')) || 0;

        // --- DOM ELEMENTS ---
        const viewDashboard = document.getElementById('view-dashboard');
        const viewPlayer = document.getElementById('view-player');
        const viewLibrary = document.getElementById('view-library');
        const timerDisplay = document.getElementById('timer-display');
        const timerCircle = document.getElementById('timer-circle');
        const navBtns = document.querySelectorAll('.nav-btn');
        const streakDisplay = document.getElementById('streak-display');
        const focusGrid = document.getElementById('focus-area-grid');

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            initDashboard();
            initCharts();
            initLibrary();
            streakDisplay.innerText = sessionsCompleted;
        });

        // --- NAVIGATION ---
        function switchView(viewName) {
            // Update UI State
            viewDashboard.classList.add('hidden');
            viewPlayer.classList.add('hidden');
            viewLibrary.classList.add('hidden');

            navBtns.forEach(btn => {
                btn.classList.remove('active-nav');
                btn.classList.remove('text-stone-900');
                btn.classList.add('text-stone-500');
            });

            if (viewName === 'dashboard') {
                viewDashboard.classList.remove('hidden');
                document.getElementById('nav-dashboard').classList.add('active-nav', 'text-stone-900');
            } else if (viewName === 'player') {
                viewPlayer.classList.remove('hidden');
                // No nav active state for player mode (focus mode)
            } else if (viewName === 'library') {
                viewLibrary.classList.remove('hidden');
                document.getElementById('nav-library').classList.add('active-nav', 'text-stone-900');
            }
        }

        // --- DASHBOARD LOGIC ---
        function initDashboard() {
            // Populate Focus Areas
            focusGrid.innerHTML = '';
            Object.keys(focusDetails).forEach(area => {
                const div = document.createElement('div');
                div.className = "bg-stone-50 hover:bg-stone-100 p-3 rounded border border-stone-200 cursor-pointer transition-colors text-center font-semibold text-stone-700 text-sm";
                div.innerText = area;
                div.onclick = () => showFocusDetail(area);
                focusGrid.appendChild(div);
            });
        }

        function showFocusDetail(area) {
            const detailBox = document.getElementById('focus-detail');
            detailBox.innerText = focusDetails[area];
            detailBox.classList.remove('hidden');
            detailBox.classList.add('fade-in');
        }

        function initCharts() {
            const ctx = document.getElementById('balanceChart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Finger Health', 'Shoulder Mobility', 'Hip Opener', 'Core/Stability', 'Antagonist Strength'],
                    datasets: [{
                        label: 'Routine Emphasis',
                        data: [80, 90, 85, 40, 75],
                        backgroundColor: 'rgba(217, 119, 6, 0.2)', // Amber 600
                        borderColor: 'rgba(217, 119, 6, 1)',
                        pointBackgroundColor: '#fff',
                        pointBorderColor: '#D97706',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: '#E7E5E4' },
                            grid: { color: '#E7E5E4' },
                            pointLabels: {
                                font: { size: 12, family: 'Inter' },
                                color: '#44403C'
                            },
                            suggestedMin: 0,
                            suggestedMax: 100,
                            ticks: { display: false } // hide numbers
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function (context) {
                                    return context.raw + '% Intensity';
                                }
                            }
                        }
                    }
                }
            });
        }

        // --- LIBRARY LOGIC ---
        function initLibrary() {
            renderLibrary(routine);
        }

        function renderLibrary(items) {
            const grid = document.getElementById('library-grid');
            grid.innerHTML = '';
            items.forEach(item => {
                const card = document.createElement('div');
                card.className = "bg-white p-6 rounded-xl shadow-sm border border-stone-100 hover:shadow-md transition-shadow";
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <span class="bg-stone-100 text-stone-600 px-2 py-1 rounded text-xs font-bold uppercase tracking-wide">${item.area}</span>
                        <span class="text-stone-400 text-xs">${item.duration}s</span>
                    </div>
                    <h3 class="text-lg font-bold text-stone-800 mb-2">${item.name}</h3>
                    <p class="text-stone-600 text-sm mb-4">${item.instruction}</p>
                    <div class="border-t border-stone-100 pt-3">
                        <p class="text-xs text-amber-600 font-medium italic">Benefit: ${item.benefit}</p>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function filterLibrary(category) {
            // Visual feedback on buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if (btn.innerText === category || (category === 'all' && btn.innerText === 'All')) {
                    btn.classList.remove('bg-white', 'text-stone-600', 'border');
                    btn.classList.add('bg-stone-800', 'text-white');
                } else {
                    btn.classList.add('bg-white', 'text-stone-600', 'border');
                    btn.classList.remove('bg-stone-800', 'text-white');
                }
            });

            if (category === 'all') {
                renderLibrary(routine);
            } else {
                const filtered = routine.filter(i => i.area.includes(category) || i.area === category);
                renderLibrary(filtered);
            }
        }

        // --- PLAYER (ROUTINE) LOGIC ---
        function startRoutine() {
            currentStepIndex = 0;
            switchView('player');
            loadStep(currentStepIndex);
            document.getElementById('total-steps-num').innerText = routine.length;
        }

        function exitRoutine() {
            clearInterval(timerInterval);
            isPaused = true;
            switchView('dashboard');
        }

        function loadStep(index) {
            if (index >= routine.length) {
                completeRoutine();
                return;
            }

            const step = routine[index];

            // DOM Updates
            document.getElementById('current-step-num').innerText = index + 1;
            document.getElementById('current-move-name').innerText = step.name;
            document.getElementById('current-move-instruction').innerText = step.instruction;
            document.getElementById('current-move-benefit').innerText = step.benefit;

            // Tags
            const tagContainer = document.getElementById('current-move-tags');
            tagContainer.innerHTML = '';
            step.tags.forEach(tag => {
                const span = document.createElement('span');
                span.className = "px-2 py-1 bg-amber-100 text-amber-800 text-xs rounded-full font-medium";
                span.innerText = tag;
                tagContainer.appendChild(span);
            });

            // Timer Setup
            timeRemaining = step.duration;
            updateTimerDisplay();

            // Auto-start timer logic could go here, but let's wait for user to hit play or have it paused initially
            isPaused = true;
            updatePlayPauseIcon();

            // Reset Circle
            const circumference = 2 * Math.PI * 80;
            timerCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            timerCircle.style.strokeDashoffset = 0;
        }

        function toggleTimer() {
            if (isPaused) {
                isPaused = false;
                timerInterval = setInterval(tick, 1000);
            } else {
                isPaused = true;
                clearInterval(timerInterval);
            }
            updatePlayPauseIcon();
        }

        function updatePlayPauseIcon() {
            const btn = document.getElementById('play-pause-btn');
            btn.innerHTML = isPaused ? '‚ñ∂' : '‚è∏';
        }

        function tick() {
            if (timeRemaining > 0) {
                timeRemaining--;
                updateTimerDisplay();
                updateProgressRing();
            } else {
                // Step Complete
                clearInterval(timerInterval);
                playAudioCue();
                // Optionally auto-advance or wait
                nextStep();
            }
        }

        function updateTimerDisplay() {
            const m = Math.floor(timeRemaining / 60).toString().padStart(2, '0');
            const s = (timeRemaining % 60).toString().padStart(2, '0');
            timerDisplay.innerText = `${m}:${s}`;
        }

        function updateProgressRing() {
            const step = routine[currentStepIndex];
            const radius = 80;
            const circumference = 2 * Math.PI * radius;
            const offset = circumference - (timeRemaining / step.duration) * circumference;
            timerCircle.style.strokeDashoffset = offset;
        }

        function nextStep() {
            clearInterval(timerInterval);
            currentStepIndex++;
            loadStep(currentStepIndex);
        }

        function prevStep() {
            if (currentStepIndex > 0) {
                clearInterval(timerInterval);
                currentStepIndex--;
                loadStep(currentStepIndex);
            }
        }

        function completeRoutine() {
            sessionsCompleted++;
            localStorage.setItem('climbStretchStreak', sessionsCompleted);
            streakDisplay.innerText = sessionsCompleted;

            // Show completion state temporarily then exit
            alert("Great Session! Maintenance Complete.");
            exitRoutine();
        }

        function playAudioCue() {
            // Simple beep context could be added here, currently just a visual transition
        }

    </script>
</body>

</html>